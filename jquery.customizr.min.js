/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
 
jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};

/**
 * JSON library by Douglas Crockford.
 *
 * This code creates a global JSON object containing two methods: stringify and parse.
 *
 */

var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());

// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; args.callee = args.callee.caller; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};

// make it safe to use console.log always
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());

/**
 * Module for product customization.
 *
 * Copyright (c) 2011 Caroline Schnapp (11heavens.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.removeCurrencyDescriptor=function(){return this.replace(/#\d+;/g,"").replace(/[^\d,.]/g,"")};Shopify.Customizr=(function(g){var r={selector:null,showLabelOnCartPage:true,noLabel:"No label",labelFormatOnCartPage:"%s: ",lineItemFormatInTemplatesPlainText:"%qx %t for %p each",attributeSeparator:" / ",checkboxOnValue:"yes",requiredText:"This field is required",requiredSelect:"Please select an option",requiredCheckbox:"This checkbox is required",useNativeValidation:null};var i={};var o=false;var s="checkout";var h=false;var b=false;var p={configuration:{expires:14,path:"/",domain:window.location.hostname},name:"shopify_product_customization",write:function(t){g.cookie(this.name,JSON.stringify(t),this.configuration)},read:function(){var t={};var u=g.cookie(this.name);if(u!==null){t=JSON.parse(u)}return t},destroy:function(){g.cookie(this.name,null,this.configuration)}};var e=function(t,v){if(v==="required"){var u=navigator.userAgent.toLowerCase();if(u.indexOf("chrome")!==-1){return true}if(u.indexOf("safari")!==-1){return false}}var w=document.createElement(t);if(v in w){return true}else{return false}};var n=function(x,w){var v=x.attr("data-label");if(v){return v}var y=x.attr("id");if(y){label=g.trim(g("label[for="+y+"]",w).filter(":first").text().replace(":",""));if(label){return label}}var u=x.attr("name")||"";var t=u.match(/attributes\[([\w-]+)\]/);if(t!==null){return t[1].replace(/(-|_)/g," ").capitalizeFirstLetter()}else{if(u){return u.replace(/(-|_)/g," ").capitalizeFirstLetter()}else{return r.noLabel}}};var d=function(u){if(r.useNativeValidation){u.attr("required","required")}else{if(!(u.parent().is(".error"))){var t=u.attr("data-error");if(!t){if(u.is(":checkbox")){t=r.requiredCheckbox}else{if(u.is("select")){t=r.requiredSelect}else{t=r.requiredText}}}u.wrap('<span class="error"></span>');u.after("<span>"+t+"</span>");u.blur(function(){var v=u.val();if(v){u.parent().find("span").remove();u.unwrap();g(this).unbind("blur")}})}}};var f=function(t){return(t.attr("required")||t.is(".required"))};var q=function(t){var v="";if(typeof t.length==="number"){for(var u=0;u<t.length;u++){v+=r.attributeSeparator;if(r.showLabelOnCartPage&&t[u].label!==r.noLabel){v+=r.labelFormatOnCartPage.replace("%s",t[u].label)}v+=t[u].value}}return v};var j=function(t,A,u,x){for(var w=0;w<i[t].length;w++){if(i[t][w].uniqueId===A){var v=i[t][w].quantity;i[t][w].quantity=u;var z=u-v;var y=parseInt(x.val(),10);x.val(y+z);if(u===0){i[t].splice(w,1);if(i[t].length===0){i[t]=undefined}}p.write(i);break}}};var a=function(u,A,t,z,v){for(var w=0;w<i[u].length;w++){if(i[u][w].uniqueId===A){var y=i[u][w].quantity*t;var x=Shopify.money_format;if(v){y=Currency.convert(y,Shopify.shop_currency,Currency.currentCurrency);x=Currency.money_format[Currency.currentCurrency]}z.html(Shopify.formatMoney(y,x));break}}};var k=function(t){if((typeof Currency==="object")&&(typeof Currency.convertAll==="function")){return Currency.currentCurrency&&(Currency.currentCurrency!==t)}else{return false}};var m=function(){b=true;if(s==="checkout"){g('form[action="/cart"]').attr("action","/checkout").get(0).submit()}else{g('form[action="/cart"]').append('<input type="hidden" name="'+s+'" value="'+s+'" />').attr("action","/cart").get(0).submit()}};var l=function(){g('a[href="/checkout"]').attr("href","/cart")};var c=function(t){var u="";g.each(t,function(A,C){if(i[A]!==undefined&&i[A].length>0){var B="\n"+r.lineItemFormatInTemplatesPlainText;var z=C.title;var y=C.quantity;var x=C.price;var w=Shopify.formatMoney(x);var D=w.removeCurrencyDescriptor();u+="attributes["+encodeURIComponent(z)+"]=";g.each(i[A],function(E,G){if(G.quantity>0){var H=G.quantity;var F="<p>"+q(G.attributes)+"</p>";var F=z+" "+g(F).text();u+=encodeURIComponent(B.replace("%q",H).replace("%t",F).replace("%p",D));y=y-G.quantity}});if(y>0){u+=B.replace("%q",y).replace("%t",z).replace("%p",D)}u+="&"}else{u+="attributes["+encodeURIComponent(z)+"]=&"}});var v={type:"POST",url:"/cart/update.js",data:u,dataType:"json",success:m};g.ajax(v)};return{attach:function(t){g.extend(r,t||{});if(r.useNativeValidation===null){r.useNativeValidation=e("input","required")}i=p.read();g.ajaxSetup({cache:false});g.getJSON("/cart.js",function(u){if(u.item_count===0){i={};p.write(i)}});g(function(){l();if(r.useNativeValidation&&g('script[src*="ajax"]').not('[src*="googleapis"]').size()){r.useNativeValidation=false}g('form[action="/cart/add"]').each(function(){var w=g(this);var x=g(this)[0];var u=w.find("input:submit, input:image");var v=u.attr("onclick");u.removeAttr("onclick");if(typeof addToCart==="function"){u.unbind("click",addToCart)}u.click(function(y){var G=w.find("[name=id]").val();var C=parseInt(w.find("[name=quantity]").val(),10)||1;var E=(new Date()).getTime();var B=true;if(G){var z=[];var A;if(r.selector===null){A=w.find("input:enabled,select:enabled,textarea:enabled").not("input:submit").not("button").not("input:image").not("input:file").not('[name^="id"]').not('[name="quantity"]').not(".single-option-selector").not('[name="analyticsdata"]')}else{A=g(r.selector)}A.each(function(I){var J="";if(g(this).is(":checkbox")){if(g(this).is(":checked")){J=g(this).val();if(J==="on"||J===""){J=r.checkboxOnValue}}else{if(f(g(this))){B=false;d(g(this))}return}}else{if(g(this).is(":radio")){if(g(this).is(":checked")){J=g(this).val();if(J===""){return}}else{return}}else{J=g(this).val();if(J===""||J===undefined){if(f(g(this))){B=false;d(g(this))}return}}}var H=n(g(this),x);z.push({label:H,value:J})});if(B){if(z.length){i[G]=i[G]||[];var F=false;for(var D=0;D<i[G].length;D++){if(JSON.stringify(i[G][D].attributes)===JSON.stringify(z)){i[G][D].quantity+=C;F=true;break}}if(!F){i[G].push({uniqueId:E,quantity:C,attributes:z})}p.write(i)}if(typeof v==="function"){v.call();return false}else{if(typeof addToCart==="function"){addToCart.call(u);return false}else{return true}}}else{g("span.error :input:eq(0)").trigger("focus");if(r.useNativeValidation){return true}else{return false}}}})})})},show:function(x,v,y,w){g.extend(r,w||{});var u={};if(typeof x.total_price==="number"){var t=x.items;g.each(t,function(z,B){var A=B.id.toString();u[A]={};u[A].title=B.title;u[A].price=B.price;u[A].linePrice=B.line_price;u[A].quantity=B.quantity})}else{u=x}Shopify.money_format=v||Shopify.money_format||"$ {{amount}}";Shopify.shop_currency=y||"USD";if(window.location.pathname==="/cart"){i=p.read();g(function(){g("input[name^=updates]").each(function(){var A=g(this).attr("id").replace("updates_","");g(this).attr("name","updates["+A+"]")});var z=k(Shopify.shop_currency);g.each(i,function(G,W){var G=G;var Q="#updates_"+G;var D=u[G].title;var X=u[G].price;var C=u[G].linePrice;var R='[href^="/cart/change"], [onclick], [class*="remove"]';var L=g(Q).parents("tr");var F=g(Q).parents("li");if(L.add(F).size()===0){i[G]=undefined;p.write(i);return}var A=L.length?L:F;var O=L.length?"tr":"li";var Y=A.find("input[name^=updates]");var V=parseInt(Y.val(),10);var N=V;var M=Shopify.money_format;if(z){C=Currency.convert(C,Shopify.shop_currency,Currency.currentCurrency);M=Currency.money_format[Currency.currentCurrency]}var T=Shopify.formatMoney(C,M).removeCurrencyDescriptor();for(var S=0;S<W.length;S++){if((typeof W[S]==="object")&&(typeof W[S].quantity==="number")&&(W[S].quantity>0)){var J=W[S].uniqueId;var K=q(W[S].attributes);var I=W[S].quantity;var U=A.clone(false).insertAfter(A).hide();var B=U.find("input[name^=updates]");B.attr("id",J).removeAttr("name").val(I).bind("change",{variantId:G,uniqueId:J,originalQtyInput:Y},function(ab){ab.stopImmediatePropagation();var Z=ab.data.variantId,ac=ab.data.uniqueId,aa=ab.data.originalQtyInput;j(Z,ac,parseInt(g(this).val(),10),aa)});U.find(R).removeAttr("onclick").unbind("click").bind("click",{qtyInput:B,variantId:G,uniqueId:J,originalQtyInput:Y},function(ab){ab.stopImmediatePropagation();ab.preventDefault();var Z=ab.data.variantId,ad=ab.data.uniqueId,aa=ab.data.originalQtyInput,ac=ab.data.qtyInput;j(Z,ad,0,aa);ac.val(0);g('form[action="/cart"]').get(0).submit()});N-=I;U.find(":contains("+D+"):last").get(0).innerHTML+=K;var E=U.find(":contains("+T+"):last");a(G,J,X,E,z);U.show()}}if(N>0){var H=Y.hide().clone(false).insertAfter(Y).val(N).removeAttr("name").attr("data-before",N).unbind("change").show().bind("change",{originalQtyInput:Y},function(ac){ac.stopImmediatePropagation();var aa=parseInt(g(this).attr("data-before"),10),Z=parseInt(g(this).val(),10),ab=ac.data.originalQtyInput;var ae=Z-aa;var ad=parseInt(ab.val(),10);g(this).attr("data-before",Z);ab.val(ad+ae)});A.find(R).removeAttr("onclick").unbind("click").bind("click",{noCustomInput:H,originalQtyInput:Y},function(ad){ad.stopImmediatePropagation();ad.preventDefault();var ab=ad.data.noCustomInput,ac=ad.data.originalQtyInput;var aa=parseInt(ab.val(),10);var Z=0;var af=Z-aa;var ae=parseInt(ac.val(),10);ac.val(ae+af);ab.val(0);g('form[action="/cart"]').get(0).submit()});var E=A.find(":contains("+T+"):last");var P=N*X;var M=Shopify.money_format;if(z){P=Currency.convert(P,Shopify.shop_currency,Currency.currentCurrency);M=Currency.money_format[Currency.currentCurrency]}E.html(Shopify.formatMoney(P,M))}else{A.hide()}});g('form[action="/cart"] li:has(:text):odd').addClass("even").removeClass("odd");g('form[action="/cart"] li:has(:text):even').addClass("odd").removeClass("even");g('form[action="/cart"] tr:has(:text):odd').addClass("even").removeClass("odd");g('form[action="/cart"] tr:has(:text):even').addClass("odd").removeClass("even");g('input[name="checkout"], input[name="goto_pp"], input[name="goto_gc"]').click(function(){o=true;s=g(this).attr("name")});g('form[action="/cart"]').submit(function(A){if(h){return false}if(o&&!b){h=true;A.preventDefault();c(u)}else{return true}})})}},getConfig:function(){return r},clearAttributes:function(){p.destroy();i={}},inspectAttributes:function(x,v,t){var w=typeof t==="string"?t:"  ";var u=JSON.stringify(p.read(),null,w);var z=document.getElementById(x||"attributes-wrapper");if(typeof z==="object"){z.innerHTML=u;z.style.display="block"}var y=document.getElementById(v||"hide-attributes");if(typeof y==="object"){y.style.display="inline"}return u}}})(jQuery);